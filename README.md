# Task 8 (Docker. AWS Elastic Beanstalk)

Elastic Beanstalk: http://inshatan-cart-api-dev.eu-west-1.elasticbeanstalk.com/

Frontend application: https://d2v14ttltat414.cloudfront.net

FE Pull Request: https://github.com/inshatan/nodejs-aws-fe/pull/6

BE Pull Request: https://github.com/inshatan/nodejs-aws-be/pull/6


## EVALUATION CRITERIA:
    
* [x]  **1** - Dockerfile is prepared, image is building. Image size is minimised to be less than 500 MB. **Image size is equal to 102 MB**
* [x]  **2** - Dockerfile is optimized. Files that change more often and commands that depend on them should be included later, files and commands that change less should be at the top.
* [x]  **3** - Folders are added to .dockerignore, with explanations. At least 2 big directories should be excluded from build context. Elastic Beanstalk application is initialized.
* [x]  **4** - Environment is created and the app is deployed to the AWS cloud. You must provide a link to your GitHub repo with Cart API service or PR with created Dockerfile and related configurations.
* [x]  **5** - FE application is updated with Cart API endpoint. You must provide a PR with updates in your FE repository and OPTIONALLY link to deployed front-end app which makes proper API calls to your Cart service.



## Tasks

### TASK 8.1
      
- [x] Add **.dockerignore** file to minimize build context. Files and folders generated by the application or npm should be excluded. Provide explanations to why the folder was ignored.
- [x] OPTIONAL: add more folders to **.dockerignore** with explanations
- [x] Minimize docker image size by applying techniques found in the lecture to be **less than 500 MB**.
- [x] OPTIONAL: Minimize docker image size to **about 100 MB**.
- [x] Optimize image build times. Dockerfile commands that run npm install should not depend on typescript files.
- [x] OPTIONAL: Optimize build times by utilizing multistage builds.
- [ ] OPTIONAL: **Lint** Dockerfile.

### TASK 8.2

Deploy Cart API service with Elastic Beanstalk.
- [x] **Use** a **Dockerfile** from **TASK 8.1** to deploy your Cart API using AWS EB CLI.
- [x] **Initiate** an Elastic beanstalk application using the eb init command. Application name must follow the following convention {yours_github_account_login}-cart-api.
- [x] **Create a new environment** using the **_eb create_** command. An environment name must be short **but not less then four signs** (e.g _develop_, _test_, _prod_, etc). Use the **_--cname_** option **{yours_github_account_login}-cart-api-{environment_name}** so that Elastic Beanstalk will use it to create a proper domain name. Use the _**--singe**_ option to not use any Load Balancer for this environment.
- [x] **Investigate** AWS Elastic Beanstalk service in the AWS Console. **Walk through** EC2 resources that were created by Elastic Beanstalk
- [x] **Update** the app and deploy changes using the **_eb deploy_** command.
- [x] **Update FE app**: pull the latest version of the app from repo and replace **{cart}** API placeholder in _src/constants/apiPaths.ts_ using a Cart API url you get after successful deployment. Make sure your app starts to call Cart API when you add or remove items. Now after page refresh cartâ€™s content might remain the same.

